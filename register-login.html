<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register/Login | Paternoster Lodge</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="./Headerfooter/headerfooter.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/aos@2.3.4/dist/aos.css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Open+Sans:wght@300;400;600&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
    <script>
        tailwind.config = {
          theme: {
            extend: {
              colors: {
                primary: '#1b3c59',
                secondary: '#d4af37',
                light: '#f5f5f5',
              },
            },
          },
        };
    </script>
    <style>
        .tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            background-color: #f1f1f1;
            border: 1px solid #ccc;
            border-bottom: none;
        }
        .tab.active {
            background-color: #fff;
            border-top: 2px solid #2d6a4f;
        }
        .tab-content {
            display: none;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 0 0 8px 8px;
            background-color: #fff;
        }
        .tab-content.active {
            display: block;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }
        .form-group input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .btn {
            background-color: #2d6a4f;
            color: white;
            padding: 10px 20px;
            border-radius: 4px;
            text-align: center;
            display: block;
            width: 100%;
            margin-top: 10px;
            text-decoration: none;
            border: none;
            cursor: pointer;
        }
        .btn:hover {
            background-color: #1b4332;
        }
        .booking-details {
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid #e5e7eb;
            border-radius: 4px;
            background-color: #f9fafb;
        }
        .booking-details h3 {
            font-size: 1.25rem;
            margin-bottom: 10px;
        }
        .booking-details p {
            margin: 5px 0;
        }
        .error-message {
            color: red;
            margin-top: 10px;
            display: none;
            text-align: center;
        }
    </style>
</head>
<body>
    <header class="bg-white/90 backdrop-blur-md fixed top-0 left-0 w-full z-50 transition-all duration-300">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 pyrtle g=2" border-b border-gray-200">
            <div class="flex justify-between items-center">
                <span class="text-gray-600 text-sm">+27 22 880 0970</span>
                <div class="flex space-x-1">
                    <img src="https://paternosterlodge.co.za/wp/wp-content/uploads/2022/08/STARS_HEADER.png" alt="Stars">
                </div>
            </div>
        </div>
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between py-4">
            <a href="./index.html" class="logo flex items-center">
                <img src="https://paternosterlodge.co.za/wp/wp-content/uploads/2022/08/PL_LOGO.png" alt="Paternoster Lodge Logo" class="h-16 sm:h-20 lg:h-24 w-auto">
            </a>
            <nav class="hidden lg:flex items-center space-x-6">
                <ul class="flex space-x-4">
                    <li><a href="./index.html" class="nav-link text-gray-800 hover:text-secondary font-medium text-sm lg:text-base relative">Home</a></li>
                    <li><a href="./about.html" class="nav-link text-gray-800 hover:text-secondary font-medium text-sm lg:text-base relative">About</a></li>
                    <li><a href="./Accomodation/accomodation.html" class="nav-link text-gray-800 hover:text-secondary font-medium text-sm lg:text-base relative">Accommodation</a></li>
                    <li><a href="./location.html" class="nav-link text-gray-800 hover:text-secondary font-medium text-sm lg:text-base relative">Location</a></li>
                    <li><a href="./gallery.html" class="nav-link text-gray-800 hover:text-secondary font-medium text-sm lg:text-base relative ">Gallery</a></li>
                    <li><a href="restaurant.html" class="nav-link text-gray-800 hover:text-secondary font-medium text-sm lg:text-base relative">Restaurant</a></li>
                    <li><a href="./Contact/contact.html" class="nav-link text-gray-800 hover:text-secondary font-medium text-sm lg:text-base relative">Contact</a></li>
                    <li><a href="./Booking/booking.html" class="nav-link bg-primary text-white px-4 py-2 rounded-full hover:bg-secondary transition text-sm lg:text-base">Book Now</a></li>
                    <li><a href="./register-login.html" class="nav-link bg-primary text-white px-4 py-2 rounded-full hover:bg-secondary transition text-sm lg:text-base active">Login</a></li>
                </ul>
            </nav>
            <button class="hamburger lg:hidden flex flex-col justify-center items-center space-y-1.5 p-2" aria-expanded="false" aria-label="Toggle navigation">
                <span class="line w-6 h-0.5 bg-gray-800 transition-all duration-300"></span>
                <span class="line w-6 h-0.5 bg-gray-800 transition-all duration-300"></span>
                <span class="line w-6 h-0.5 bg-gray-800 transition-all duration-300"></span>
            </button>
        </div>
        <nav class="mobile-nav lg:hidden w-3/4 max-w-sm bg-primary/90 text-white flex-col z-40 transition-all duration-500 hidden">
            <ul class="flex flex-col items-start space-y-4 py-6 px-6">
                <li><a href="./index.html" class="nav-link text-white hover:text-secondary font-medium text-lg relative" data-nav-item>Home</a></li>
                <li><a href="./about.html" class="nav-link text-white hover:text-secondary font-medium text-lg relative" data-nav-item>About</a></li>
                <li><a href="./Accomodation/accomodation.html" class="nav-link text-white hover:text-secondary font-medium text-lg relative" data-nav-item>Accommodation</a></li>
                <li><a href="./location.html" class="nav-link text-white hover:text-secondary font-medium text-lg relative" data-nav-item>Location</a></li>
                <li><a href="./Gallery/gallery.html" class="nav-link text-white hover:text-secondary font-medium text-lg relative" data-nav-item>Gallery</a></li>
                <li><a href="./restaurant.html" class="nav-link text-white hover:text-secondary font-medium text-lg relative" data-nav-item>Restaurant</a></li>
                <li><a href="./Contact/contact.html" class="nav-link text-white hover:text-secondary font-medium text-lg relative" data-nav-item>Contact</a></li>
                <li><a href="./Booking/booking.html" class="nav-link bg-secondary text-primary px-4 py-2 rounded-full hover:bg-white transition text-lg" data-nav-item>Book Now</a></li>
                <li><a href="./register-login.html" class="nav-link bg-secondary text-primary px-4 py-2 rounded-full hover:bg-white transition text-lg active" data-nav-item>Login</a></li>
            </ul>
        </nav>
    </header>

    <section class="register-login" style="padding: 50px 0; margin-top: 200px;">
        <div class="container" style="max-width: 600px; margin: 0 auto;" data-aos="fade-up">
            <h2 style="text-align: center; margin-bottom: 20px;">Register or Login to Confirm Booking</h2>

            <div class="booking-details" id="booking-details">
                <h3>Booking Summary</h3>
                <p><strong>Room Type:</strong> <span id="summary-room-type"></span></p>
                <p><strong>Check-In:</strong> <span id="summary-check-in"></span></p>
                <p><strong>Check-Out:</strong> <span id="summary-check-out"></span></p>
                <p><strong>Nights:</strong> <span id="summary-nights"></span></p>
                <p><strong>Adults:</strong> <span id="summary-adults"></span></p>
                <p><strong>Children (Age 0-5):</strong> <span id="summary-children"></span></p>
                <p><strong>Total:</strong> R<span id="summary-total"></span></p>
            </div>

            <div class="tabs">
                <div class="tab active" data-tab="login">Login</div>
                <div class="tab" data-tab="register">Register</div>
            </div>

            <div id="login" class="tab-content active">
                <div class="form-group">
                    <label for="login-email">Email</label>
                    <input type="email" id="login-email" placeholder="Enter your email" required>
                </div>
                <div class="form-group">
                    <label for="login-password">Password</label>
                    <input type="password" id="login-password" placeholder="Enter your password" required>
                </div>
                <button type="button" class="btn" id="login-btn">Login and Proceed</button>
                <p class="error-message" id="login-error"></p>
            </div>

            <div id="register" class="tab-content">
                <div class="form-group">
                    <label for="register-name">Full Name</label>
                    <input type="text" id="register-name" placeholder="Enter your full name" required>
                </div>
                <div class="form-group">
                    <label for="register-email">Email</label>
                    <input type="email" id="register-email" placeholder="Enter your email" required>
                </div>
                <div class="form-group">
                    <label for="register-password">Password</label>
                    <input type="password" id="register-password" placeholder="Create a password" required>
                </div>
                <div class="form-group">
                    <label for="register-confirm-password">Confirm Password</label>
                    <input type="password" id="register-confirm-password" placeholder="Confirm your password" required>
                </div>
                <button type="button" class="btn" id="register-btn">Register and Proceed</button>
                <p class="error-message" id="register-error"></p>
            </div>
        </div>
    </section>

    <footer class="bg-primary text-white pt-12 pb-6">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
            <div class="footer-column">
                <h3 class="text-xl font-semibold text-secondary mb-4 relative">Paternoster Lodge</h3>
                <p class="text-gray-300 text-sm">A luxury seaside accommodation offering unforgettable experiences in a breathtaking coastal setting.</p>
                <div class="flex space-x-4 mt-4">
                    <a href="#" class="text-gray-300 hover:text-secondary transition"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="text-gray-300 hover:text-secondary transition"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="text-gray-300 hover:text-secondary transition"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="text-gray-300 hover:text-secondary transition"><i class="fab fa-tripadvisor"></i></a>
                </div>
            </div>
            <div class="footer-column">
                <h3 class="text-xl font-semibold text-secondary mb-4 relative">Quick Links</h3>
                <ul class="space-y-2">
                    <li><a href="./index.html" class="text-gray-300 hover:text-secondary transition text-sm">Home</a></li>
                    <li><a href="./about.html" class="text-gray-300 hover:text-secondary transition text-sm">About Us</a></li>
                    <li><a href="./Accomodation/accomodation.html" class="text-gray-300 hover:text-secondary transition text-sm">Rooms & Suites</a></li>
                    <li><a href="./location.html" class="text-gray-300 hover:text-secondary transition text-sm">Location</a></li>
                    <li><a href="./Gallery/gallery.html" class="text-gray-300 hover:text-secondary transition text-sm">Gallery</a></li>
                    <li><a href="./Booking/booking.html" class="text-gray-300 hover:text-secondary transition text-sm">Book Now</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3 class="text-xl font-semibold text-secondary mb-4 relative">Contact Us</h3>
                <ul class="space-y-2">
                    <li class="flex items-center text-gray-300 text-sm"><i class="fas fa-map-marker-alt mr-2 text-secondary"></i> 64 St Augustine Rd, Kliprug, Paternoster, 7381</li>
                    <li class="flex items-center text-gray-300 text-sm"><i class="fas fa-phone mr-2 text-secondary"></i> 2722 880 0970</li>
                    <li class="flex items-center text-gray-300 text-sm"><i class="fas fa-envelope mr-2 text-secondary"></i> info@paternosterlodge.co.za</li>
                    <li class="flex items-center text-gray-300 text-sm"><i class="fas fa-clock mr-2 text-secondary"></i> Reception: 07:00 - 22:00</li>
                </ul>
            </div>
            <div class="footer-column">
                <h3 class="text-xl font-semibold text-secondary mb-4 relative">Newsletter</h3>
                <p class="text-gray-300 text-sm mb-4">Subscribe to our newsletter for special offers and updates.</p>
                <div class="flex space-x-2">
                    <input type="email" placeholder="Your Email Address" class="flex-1 p-2 bg-white/10 border border-secondary/50 rounded text-white placeholder-gray-400 text-sm focus:outline-none focus:border-secondary">
                    <button type="button" class="bg-secondary text-primary px-4 py-2 rounded hover:bg-white transition text-sm">Subscribe</button>
                </div>
            </div>
        </div>
        <div class="border-t border-white/10 mt-8 pt-4 text-center">
            <p class="text-gray-300 text-sm">Â© 2025 Paternoster Lodge. All Rights Reserved. | Designed by Syntax Syndicate</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="./Headerfooter/headerfooter.js"></script>
    <script src="script.js"></script>
    <script>
        AOS.init({
            duration: 1000,
            once: true
        });

        // Tab Switching
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');

        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                tabs.forEach(t => t.classList.remove('active'));
                tabContents.forEach(content => content.classList.remove('active'));

                tab.classList.add('active');
                document.getElementById(tab.dataset.tab).classList.add('active');
            });
        });

        // Populate Booking Details
        const urlParams = new URLSearchParams(window.location.search);
        const bookingData = {
            roomType: urlParams.get('roomType') || 'N/A',
            checkIn: urlParams.get('checkIn') || 'N/A',
            checkOut: urlParams.get('checkOut') || 'N/A',
            nights: urlParams.get('nights') || 'N/A',
            adults: urlParams.get('adults') || 'N/A',
            children: urlParams.get('children') || 'N/A',
            total: urlParams.get('total') || 'N/A'
        };

        document.getElementById('summary-room-type').textContent = bookingData.roomType;
        document.getElementById('summary-check-in').textContent = bookingData.checkIn;
        document.getElementById('summary-check-out').textContent = bookingData.checkOut;
        document.getElementById('summary-nights').textContent = bookingData.nights;
        document.getElementById('summary-adults').textContent = bookingData.adults;
        document.getElementById('summary-children').textContent = bookingData.children;
        document.getElementById('summary-total').textContent = bookingData.total;

        // Store booking data in localStorage for dashboard
        localStorage.setItem('pendingBooking', JSON.stringify(bookingData));

        // Login Functionality
        document.getElementById('login-btn').addEventListener('click', async () => {
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            const loginError = document.getElementById('login-error');

            if (!email || !password) {
                loginError.textContent = 'Please fill in all fields.';
                loginError.style.display = 'block';
                return;
            }

            const { data, error } = await window.supabase.auth.signInWithPassword({
                email: email,
                password: password
            });

            if (error) {
                loginError.textContent = error.message;
                loginError.style.display = 'block';
            } else {
                loginError.style.display = 'none';
                window.location.href = '../UserDashboard/dashboard.html';
            }
        });

        // Register Functionality
        document.getElementById('register-btn').addEventListener('click', async () => {
            const name = document.getElementById('register-name').value;
            const email = document.getElementById('register-email').value;
            const password = document.getElementById('register-password').value;
            const confirmPassword = document.getElementById('register-confirm-password').value;
            const registerError = document.getElementById('register-error');

            if (!name || !email || !password || !confirmPassword) {
                registerError.textContent = 'Please fill in all fields.';
                registerError.style.display = 'block';
                return;
            }

            if (password !== confirmPassword) {
                registerError.textContent = 'Passwords do not match.';
                registerError.style.display = 'block';
                return;
            }

            const { data, error } = await window.supabase.auth.signUp({
                email: email,
                password: password,
                options: {
                    data: { full_name: name }
                }
            });

            if (error) {
                registerError.textContent = error.message;
                registerError.style.display = 'block';
            } else if (data.user) {
                registerError.style.display = 'none';
                window.location.href = 'register-login.html?' + urlParams.toString();
            } else {
                registerError.textContent = 'Please check your email to confirm registration.';
                registerError.style.display = 'block';
            }
        });
    </script>
</body>
</html>